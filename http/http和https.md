### http 和 https

- http 是明文传输，传输过程中一旦被劫持，敏感信息容易泄露
- https = http + 加密，在 http 的基础上加入了加密，中间传输的信息是加密的，劫持了也无法破解
- 现代浏览器已开始强制建议使用 https 协议，不使用用户访问时会给强提示“网站不安全”，提示用户尽量不要访问不是 https 的网站

### https 加密传输

- 对称加密：一个 key 同时负责加密和解密（不安全，如果在传输过程中劫持了 key 和使用 key 加密的传输内容，就可以被劫持者解密获取传输的内容）。使用对称加密是为了降低成本，因为非对称加密的话计算成本会很高。
- 非对称加密：一对儿 key，使用 A 加密之后，使用 B 来解密。首先服务端保留一对密钥（公钥和私钥），客户端向服务端请求时，服务端把公钥 pubKey 传给客户端；客户端把传输内容通过该公钥加密后，传给服务端，服务端使用私钥解密。这样就算 pubKey 和请求内容被劫持也不怕，因为私钥存储在服务端是安全的，解密必须用私钥

### https 的加密方式

https 同时用到了对称加密和非对称加密这两种加密方式。首先使用非对称加密的方式获取 pubKey，然后生成一个随机字符串传给服务端，服务端在通过私钥解密，之后再用这个随机字符串作为对称加密的 key 来进行对称加密。
之所以不直接使用非对称加密的方式是因为成本，非对称加密的话计算成本会很高，如果传输量频繁数据量很大，则成本会很高，所以组合使用。

### https 证书（使用 https 需要再第三方服务购买证书，比如可以购买阿里云 https 证书）

- 防止中间人攻击，在传输过程中防止中间人把 pubKey 换成自己的 pubKey，之后再通过中间人自己的 key 进行解密，这样就会被获取传输的内容
- 使用第三方证书（防止被中间人篡改、替换）
- 浏览器校验证书（浏览器校验证书也是和第三方机构打通，支持第三方机构的校验工作，浏览器会自动去校验证书）

总体流程：服务器向第三方机构购买证书，证书中就包含 pubKey 和 key。浏览器向服务端发送请求，服务端将证书信息传递给客户端，然后客户端去验证证书是否合法。如果合法则走正常 https 加密过程，如果不合法则会给出一些提示建议交给用户去判断。
